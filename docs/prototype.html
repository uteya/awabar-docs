<!DOCTYPE html>
<html lang="ja">
<head>
<style id="auth-gate-style">
body>*:not(#auth-gate){display:none!important}
#auth-gate{display:flex!important;position:fixed;top:0;left:0;width:100%;height:100%;background:#0a0a0a;z-index:99999;align-items:center;justify-content:center;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",sans-serif}
#auth-gate .box{max-width:340px;width:100%;padding:2rem;text-align:center}
#auth-gate h1{font-size:1.1rem;color:#fff;margin-bottom:1.5rem;font-weight:500}
#auth-gate input{width:100%;padding:.65rem 1rem;background:#1a1a1a;border:1px solid #333;border-radius:6px;color:#fff;font-size:1rem;outline:none;margin-bottom:.6rem}
#auth-gate input:focus{border-color:#666}
#auth-gate button{width:100%;padding:.65rem;background:#fff;color:#000;border:none;border-radius:6px;font-size:.9rem;font-weight:600;cursor:pointer}
#auth-gate button:hover{background:#ddd}
#auth-gate .err{color:#f44;font-size:.8rem;margin-top:.5rem;visibility:hidden}
#auth-gate .err.show{visibility:visible}
</style>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>副店長Buddy — シフト最適化プロダクトビジョン</title>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;500;600;700&family=Outfit:wght@500;600&display=swap" rel="stylesheet" />
  <style>
    :root {
      --bg: #f8f7f4;
      --surface: #ffffff;
      --ink: #1a1a24;
      --ink-muted: #5c5c6e;
      --primary: #c45c26;
      --primary-soft: #f0e6e0;
      --accent: #2d4a6e;
      --accent-soft: #e8eef5;
      --success: #2d6a4f;
      --success-soft: #e2f0e8;
      --radius: 12px;
      --radius-sm: 8px;
      --shadow: 0 2px 12px rgba(26, 26, 36, 0.06);
      --font-sans: 'Noto Sans JP', sans-serif;
      --font-display: 'Outfit', 'Noto Sans JP', sans-serif;
    }

    * { box-sizing: border-box; }
    body {
      margin: 0;
      font-family: var(--font-sans);
      background: var(--bg);
      color: var(--ink);
      line-height: 1.6;
      min-height: 100vh;
    }

    .app {
      display: flex;
      min-height: 100vh;
    }

    /* サイドナビ */
    .nav {
      width: 240px;
      flex-shrink: 0;
      background: var(--surface);
      border-right: 1px solid rgba(26, 26, 36, 0.08);
      padding: 24px 0;
    }
    .nav-logo {
      padding: 0 24px 24px;
      border-bottom: 1px solid rgba(26, 26, 36, 0.06);
      margin-bottom: 16px;
    }
    .nav-logo span {
      font-family: var(--font-display);
      font-weight: 600;
      font-size: 1rem;
      color: var(--accent);
    }
    .nav a {
      display: flex;
      align-items: center;
      gap: 10px;
      padding: 10px 24px;
      color: var(--ink-muted);
      text-decoration: none;
      font-size: 0.9rem;
      font-weight: 500;
      transition: color 0.15s, background 0.15s;
    }
    .nav a:hover { color: var(--ink); background: var(--primary-soft); }
    .nav a.active { color: var(--primary); background: var(--primary-soft); }
    .nav-icon { width: 20px; height: 20px; opacity: 0.7; }

    /* メインエリア */
    .main {
      flex: 1;
      overflow: auto;
      padding: 32px 40px 48px;
    }

    .page-header {
      margin-bottom: 28px;
    }
    .page-header h1 {
      font-size: 1.5rem;
      font-weight: 700;
      margin: 0 0 4px 0;
      color: var(--ink);
    }
    .page-header p {
      margin: 0;
      font-size: 0.9rem;
      color: var(--ink-muted);
    }

    /* カード */
    .card {
      background: var(--surface);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      padding: 24px;
      margin-bottom: 24px;
    }
    .card-title {
      font-size: 0.95rem;
      font-weight: 600;
      margin: 0 0 16px 0;
      color: var(--ink);
    }

    /* スキル設定テーブル */
    .skill-table {
      width: 100%;
      border-collapse: collapse;
      font-size: 0.9rem;
    }
    .skill-table th,
    .skill-table td {
      padding: 12px 16px;
      text-align: left;
      border-bottom: 1px solid rgba(26, 26, 36, 0.06);
    }
    .skill-table th {
      font-weight: 600;
      color: var(--ink-muted);
      font-size: 0.8rem;
      text-transform: uppercase;
      letter-spacing: 0.04em;
    }
    .skill-table tr:hover td { background: var(--primary-soft); }
    .skill-tag {
      display: inline-block;
      padding: 4px 10px;
      border-radius: 20px;
      font-size: 0.8rem;
      font-weight: 500;
      margin-right: 6px;
      margin-bottom: 4px;
    }
    .skill-tag--call { background: var(--accent-soft); color: var(--accent); }
    .skill-tag--price { background: var(--success-soft); color: var(--success); }

    /* カレンダー */
    .calendar-wrap {
      overflow-x: auto;
    }
    .calendar {
      min-width: 720px;
      border-collapse: collapse;
      font-size: 0.85rem;
    }
    .calendar th,
    .calendar td {
      padding: 10px 12px;
      border: 1px solid rgba(26, 26, 36, 0.08);
      text-align: center;
    }
    .calendar th {
      background: var(--accent);
      color: #fff;
      font-weight: 600;
    }
    .calendar th:first-child { text-align: left; padding-left: 16px; }
    .calendar td:first-child { text-align: left; font-weight: 500; padding-left: 16px; }
    .calendar .day-cell { min-width: 80px; }
    .calendar .skill-dot {
      display: inline-block;
      width: 8px; height: 8px;
      border-radius: 50%;
      margin: 0 2px;
    }
    .calendar .skill-dot.call { background: var(--accent); }
    .calendar .skill-dot.price { background: var(--success); }

    /* シフト結果 */
    .shift-meta {
      display: flex;
      gap: 24px;
      flex-wrap: wrap;
      margin-bottom: 20px;
      font-size: 0.9rem;
      color: var(--ink-muted);
    }
    .shift-meta span { display: flex; align-items: center; gap: 6px; }
    .shift-grid {
      display: grid;
      grid-template-columns: 100px repeat(14, 1fr);
      gap: 0;
      font-size: 0.8rem;
      border: 1px solid rgba(26, 26, 36, 0.08);
      border-radius: var(--radius-sm);
      overflow: hidden;
    }
    .shift-grid .cell {
      padding: 8px 6px;
      border-right: 1px solid rgba(26, 26, 36, 0.06);
      border-bottom: 1px solid rgba(26, 26, 36, 0.06);
      background: var(--surface);
    }
    .shift-grid .cell.header {
      background: var(--accent-soft);
      font-weight: 600;
      color: var(--accent);
    }
    .shift-grid .cell.staff-name { font-weight: 500; }
    .shift-grid .cell.assigned { background: var(--primary-soft); color: var(--primary); font-weight: 500; }

    /* LLMアドバイス */
    .advice-list { margin: 0; padding: 0; list-style: none; }
    .advice-list li {
      padding: 16px 20px;
      margin-bottom: 12px;
      background: var(--accent-soft);
      border-radius: var(--radius-sm);
      border-left: 4px solid var(--accent);
      font-size: 0.9rem;
    }
    .advice-list li strong { color: var(--accent); }
    .chat-input-wrap {
      display: flex;
      gap: 12px;
      margin-top: 20px;
    }
    .chat-input-wrap input {
      flex: 1;
      padding: 12px 16px;
      border: 1px solid rgba(26, 26, 36, 0.12);
      border-radius: var(--radius-sm);
      font-family: var(--font-sans);
      font-size: 0.9rem;
    }
    .chat-input-wrap button {
      padding: 12px 24px;
      background: var(--primary);
      color: #fff;
      border: none;
      border-radius: var(--radius-sm);
      font-family: var(--font-sans);
      font-weight: 600;
      cursor: pointer;
    }

    /* ビジョン・サマリ */
    .vision-block {
      background: linear-gradient(135deg, var(--accent) 0%, #1a2d44 100%);
      color: #fff;
      border-radius: var(--radius);
      padding: 28px 32px;
      margin-bottom: 32px;
    }
    .vision-block h2 { font-size: 1.1rem; margin: 0 0 12px 0; font-weight: 600; }
    .vision-block p { margin: 0; opacity: 0.92; font-size: 0.95rem; line-height: 1.65; }

    /* 画面切り替え（同一ページ内） */
    .screen { display: none; }
    .screen.active { display: block; }

    /* ダッシュボード */
    .stats {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
      gap: 20px;
      margin-bottom: 28px;
    }
    .stat-card {
      background: var(--surface);
      border-radius: var(--radius);
      padding: 20px;
      box-shadow: var(--shadow);
    }
    .stat-card .label { font-size: 0.8rem; color: var(--ink-muted); margin-bottom: 4px; }
    .stat-card .value { font-family: var(--font-display); font-size: 1.5rem; font-weight: 600; color: var(--ink); }

    /* ダッシュボード：インプット・アウトプット */
    .section-label {
      font-size: 0.75rem;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.06em;
      color: var(--ink-muted);
      margin-bottom: 12px;
    }
    .input-buttons {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 16px;
      margin-bottom: 32px;
    }
    .input-btn {
      display: block;
      padding: 20px 16px;
      background: var(--surface);
      border: 2px solid rgba(26, 26, 36, 0.08);
      border-radius: var(--radius);
      color: var(--ink);
      text-decoration: none;
      font-weight: 600;
      font-size: 0.95rem;
      text-align: center;
      transition: border-color 0.2s, box-shadow 0.2s;
    }
    .input-btn:hover { border-color: var(--accent); box-shadow: var(--shadow); }
    .flow-steps {
      display: flex;
      flex-wrap: wrap;
      gap: 12px;
      align-items: center;
    }
    .flow-step {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 12px 20px;
      background: var(--surface);
      border-radius: var(--radius-sm);
      border: 1px solid rgba(26, 26, 36, 0.08);
      color: var(--ink);
      text-decoration: none;
      font-size: 0.9rem;
      font-weight: 500;
      transition: border-color 0.2s, background 0.2s;
    }
    .flow-step:hover { border-color: var(--primary); background: var(--primary-soft); }
    .flow-step.primary { background: var(--primary-soft); border-color: var(--primary); color: var(--primary); }
    .flow-arrow { color: var(--ink-muted); font-size: 1.2rem; }

    /* チャットUI */
    .chat-panel {
      display: flex;
      flex-direction: column;
      height: 380px;
      border: 1px solid rgba(26, 26, 36, 0.08);
      border-radius: var(--radius-sm);
      background: var(--surface);
    }
    .chat-messages {
      flex: 1;
      overflow-y: auto;
      padding: 16px;
      display: flex;
      flex-direction: column;
      gap: 12px;
    }
    .chat-msg {
      max-width: 85%;
      padding: 12px 16px;
      border-radius: 12px;
      font-size: 0.9rem;
      line-height: 1.5;
    }
    .chat-msg.bot {
      align-self: flex-start;
      background: var(--accent-soft);
      border-bottom-left-radius: 4px;
    }
    .chat-msg.user {
      align-self: flex-end;
      background: var(--accent);
      color: #fff;
      border-bottom-right-radius: 4px;
    }
    .chat-msg .time { font-size: 0.75rem; opacity: 0.8; margin-top: 6px; }
    .chat-form {
      display: flex;
      gap: 8px;
      padding: 12px 16px;
      border-top: 1px solid rgba(26, 26, 36, 0.08);
    }
    .chat-form input {
      flex: 1;
      padding: 10px 14px;
      border: 1px solid rgba(26, 26, 36, 0.12);
      border-radius: 8px;
      font-family: var(--font-sans);
      font-size: 0.9rem;
    }
    .chat-form button {
      padding: 10px 20px;
      background: var(--primary);
      color: #fff;
      border: none;
      border-radius: 8px;
      font-family: var(--font-sans);
      font-weight: 600;
      cursor: pointer;
    }
    .predict-cards {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
      gap: 16px;
      margin-bottom: 20px;
    }
    .predict-card {
      background: var(--surface);
      border: 1px solid rgba(26, 26, 36, 0.08);
      border-radius: var(--radius-sm);
      padding: 16px;
    }
    .predict-card .label { font-size: 0.8rem; color: var(--ink-muted); margin-bottom: 4px; }
    .predict-card .value { font-family: var(--font-display); font-size: 1.25rem; font-weight: 600; color: var(--ink); }
    .confirm-btn-wrap { margin-top: 24px; }
    .confirm-btn {
      padding: 14px 32px;
      background: var(--success);
      color: #fff;
      border: none;
      border-radius: var(--radius-sm);
      font-family: var(--font-sans);
      font-weight: 600;
      font-size: 1rem;
      cursor: pointer;
    }

    /* 予測グラフ */
    .chart-row { display: grid; grid-template-columns: 1fr 1fr; gap: 24px; margin-bottom: 24px; }
    .chart-box {
      background: var(--surface);
      border: 1px solid rgba(26, 26, 36, 0.08);
      border-radius: var(--radius-sm);
      padding: 20px;
    }
    .chart-box h3 { font-size: 0.9rem; margin: 0 0 4px 0; color: var(--ink); font-weight: 600; }
    .chart-box .chart-sub { font-size: 0.75rem; color: var(--ink-muted); margin-bottom: 12px; }
    .chart-box svg { width: 100%; height: 220px; display: block; }
    .month-nav {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 16px;
      margin-bottom: 20px;
    }
    .month-nav button {
      padding: 8px 16px;
      background: var(--surface);
      border: 1px solid rgba(26, 26, 36, 0.12);
      border-radius: var(--radius-sm);
      font-family: var(--font-sans);
      font-size: 0.9rem;
      cursor: pointer;
    }
    .month-nav button:hover { background: var(--accent-soft); border-color: var(--accent); }
    .month-nav span { font-weight: 600; font-size: 1rem; min-width: 120px; text-align: center; }

    /* カレンダー形式（月表示） */
    .cal-month { max-width: 840px; }
    .cal-month .cal-head { display: grid; grid-template-columns: repeat(7, 1fr); gap: 1px; margin-bottom: 2px; }
    .cal-month .cal-head span {
      text-align: center; font-size: 0.75rem; font-weight: 600; color: var(--ink-muted);
      padding: 6px 4px;
    }
    .cal-month .cal-head span:first-child { color: var(--primary); }
    .cal-month .cal-head span:last-child { color: var(--accent); }
    .cal-month .cal-body { display: grid; grid-template-columns: repeat(7, 1fr); gap: 1px; }
    .cal-month .cal-day {
      min-height: 72px;
      padding: 6px 8px;
      background: var(--surface);
      border: 1px solid rgba(26, 26, 36, 0.08);
      border-radius: 4px;
      font-size: 0.8rem;
    }
    .cal-month .cal-day.other-month { background: var(--bg); color: var(--ink-muted); }
    .cal-month .cal-day .date-num { font-weight: 600; margin-bottom: 4px; font-size: 0.85rem; }
    .cal-month .cal-day .date-content { color: var(--ink-muted); line-height: 1.4; }
    .cal-month .cal-day.has-event { background: var(--accent-soft); }
    .cal-month .cal-day.closed { background: var(--primary-soft); }
    .cal-month .cal-day .staff-names { font-size: 0.75rem; color: var(--ink); }
    .staff-tags { display: flex; flex-wrap: wrap; align-items: center; gap: 4px 8px; margin-top: 4px; }
    .cal-store { font-size: 0.65rem; font-weight: 600; color: var(--ink-muted); margin-right: 2px; }
    .staff-tag {
      display: inline-block;
      padding: 2px 8px;
      border-radius: 12px;
      font-size: 0.7rem;
      font-weight: 500;
      background: var(--accent-soft);
      color: var(--accent);
    }
    .staff-tag.awb { background: var(--primary-soft); color: var(--primary); }
    .staff-tag.acf { background: var(--success-soft); color: var(--success); }
    .adjust-row { display: grid; grid-template-columns: 1fr 1fr; gap: 24px; align-items: start; }
    .adjust-row .card { margin-bottom: 0; }
    @media (max-width: 900px) { .adjust-row { grid-template-columns: 1fr; } }

    @media (max-width: 768px) {
      .app { flex-direction: column; }
      .nav {
        width: 100%;
        display: flex;
        flex-wrap: wrap;
        gap: 4px;
        padding: 12px 16px;
        border-right: none;
        border-bottom: 1px solid rgba(26, 26, 36, 0.08);
      }
      .nav-logo { width: 100%; padding: 0 0 12px; margin-bottom: 8px; }
      .nav a { padding: 8px 12px; font-size: 0.85rem; }
      .main { padding: 20px 16px 32px; }
      .stats { grid-template-columns: 1fr 1fr; }
      .input-buttons { grid-template-columns: 1fr 1fr; }
      .flow-steps { flex-direction: column; align-items: stretch; }
      .flow-arrow { transform: rotate(90deg); }
      .chart-row { grid-template-columns: 1fr; }
    }
  </style>
</head>
<body>
<div id="auth-gate">
<div class="box">
<h1>パスワードを入力してください</h1>
<form id="auth-form">
<input type="password" id="auth-pw" placeholder="パスワード" autofocus required>
<button type="submit">入る</button>
</form>
<p class="err" id="auth-err">パスワードが違います</p>
</div>
</div>
<script>
(function(){
var K="awabar-docs-auth";
if(sessionStorage.getItem(K)==="ok"){
document.getElementById("auth-gate").remove();
document.getElementById("auth-gate-style").remove();
return;
}
document.getElementById("auth-form").addEventListener("submit",function(e){
e.preventDefault();
if(document.getElementById("auth-pw").value==="nikarasu"){
sessionStorage.setItem(K,"ok");
document.getElementById("auth-gate").remove();
document.getElementById("auth-gate-style").remove();
}else{
document.getElementById("auth-err").classList.add("show");
document.getElementById("auth-pw").value="";
document.getElementById("auth-pw").focus();
}
});
})();
</script>
  <div class="app">
    <nav class="nav">
      <div class="nav-logo"><span>副店長Buddy</span><br><span style="font-size:0.75rem; color:var(--ink-muted);">シフト最適化</span></div>
      <a href="#dashboard" class="nav-link active">ダッシュボード</a>
      <a href="#draft-shift" class="nav-link">仮シフト表</a>
      <a href="#adjust" class="nav-link">調整・確定</a>
      <a href="#final-calendar" class="nav-link">最終カレンダー</a>
    </nav>

    <main class="main">
      <!-- ダッシュボード -->
      <section id="dashboard" class="screen active">
        <div class="page-header">
          <h1>シフト最適化</h1>
          <p>「売上が上がるシフト」を組むための意思決定支援ツール</p>
        </div>

        <div class="vision-block">
          <h2>「良いシフト」には3つのベクトルがある</h2>
          <p>
            <strong>短期: 売上</strong> — 客を呼べる人・単価を上げられる人を正しい日に配置する<br>
            <strong>中期: 教育</strong> — スキルを持つ人と持たない人を一緒に入れてOJTで育てる<br>
            <strong>従業員満足</strong> — 希望が満たされ、一緒に働きたい人と入れる<br><br>
            このツールは、数理最適化でスキル充足ベースの仮シフトを生成し、LLMが教育・満足の観点でアドバイス。<br>
            店長はそれを見ながら最終判断を下す。<strong>直感を否定するのではなく、直感を支えるデータと提案を出す。</strong>
          </p>
        </div>

        <div class="card">
          <p class="section-label">STEP 1 — インプット設定</p>
          <p style="margin: 0 0 16px 0; font-size: 0.9rem; color: var(--ink-muted);">最適化に必要な情報を以下の画面で設定します。</p>
          <div class="input-buttons" style="grid-template-columns: repeat(5, 1fr);">
            <a href="#shift-form" class="input-btn nav-link-btn">シフト回答フォーム<br><span style="font-size:0.7rem; color:var(--success);">稼働中</span></a>
            <a href="#staff-list" class="input-btn nav-link-btn">スタッフリスト<br><span style="font-size:0.7rem; color:var(--success);">稼働中</span></a>
            <a href="#skill-calendar" class="input-btn nav-link-btn" style="border-color:var(--primary);">スキルカレンダー<br><span style="font-size:0.7rem; color:var(--primary);">R&D立証済</span></a>
            <a href="#closed-days" class="input-btn nav-link-btn">休業日<br><span style="font-size:0.7rem; color:var(--success);">稼働中</span></a>
            <a href="#event-calendar" class="input-btn nav-link-btn">イベントカレンダー<br><span style="font-size:0.7rem; color:var(--success);">稼働中</span></a>
          </div>
        </div>

        <div class="card">
          <p class="section-label">STEP 2〜4 — アウトプットの流れ</p>
          <p style="margin: 0 0 16px 0; font-size: 0.9rem; color: var(--ink-muted);">スキル充足ベースの仮シフトを生成 → 売上予測とLLMアドバイスで調整 → 確定で最終カレンダーを反映</p>
          <div class="flow-steps" style="margin-top: 16px;">
            <a href="#draft-shift" class="flow-step nav-link-btn">2. 仮シフト表<br><span style="font-size:0.7rem; color:var(--success);">稼働中</span></a>
            <span class="flow-arrow">→</span>
            <a href="#adjust" class="flow-step primary nav-link-btn">3. 調整（予測・LLM）<br><span style="font-size:0.7rem; color:var(--primary);">R&D立証済</span></a>
            <span class="flow-arrow">→</span>
            <a href="#final-calendar" class="flow-step nav-link-btn">4. 確定カレンダー<br><span style="font-size:0.7rem; color:var(--success);">稼働中</span></a>
          </div>
        </div>

        <div class="card" style="border-left:4px solid var(--accent);">
          <p class="section-label">ステータスの見方</p>
          <p style="margin: 0; font-size: 0.9rem; color: var(--ink-muted);">
            <span style="color:var(--success); font-weight:600;">稼働中</span> — 現在awabar福岡で本番運用中の機能<br>
            <span style="color:var(--primary); font-weight:600;">R&D立証済</span> — 2月のR&Dで技術的に実装完了。プロダクト統合待ち<br>
            <span style="color:var(--ink-muted); font-weight:600;">今後</span> — 3月以降に開発予定の機能
          </p>
        </div>
      </section>

      <!-- シフト回答フォーム -->
      <section id="shift-form" class="screen">
        <div class="page-header">
          <h1>シフト回答フォーム</h1>
          <p>従業員がシフト希望日を設定する画面</p>
        </div>
        <div class="card">
          <p class="card-title">希望日・希望時間の入力</p>
          <p style="margin:0; color: var(--ink-muted); font-size: 0.9rem;">対象月を選択し、各スタッフが「入りたい日」「入れない日」を回答。回答期限や未回答者一覧もここで管理します。（プロトタイプのため表示のみ）</p>
          <p style="margin: 16px 0 0; padding: 24px; background: var(--primary-soft); border-radius: var(--radius-sm); font-size: 0.9rem; color: var(--ink-muted);">例：2月シフト希望.csv をアップロード／フォームで入力</p>
        </div>
      </section>

      <!-- スタッフリスト -->
      <section id="staff-list" class="screen">
        <div class="page-header">
          <h1>スタッフリスト</h1>
          <p>スタッフの情報とスキルを管理する画面</p>
        </div>
        <div class="card">
          <h2 class="card-title">スタッフ × スキル</h2>
          <table class="skill-table">
            <thead>
              <tr>
                <th>スタッフ名</th>
                <th>客呼び（来客数向上）</th>
                <th>客単価UP</th>
                <th>備考</th>
              </tr>
            </thead>
            <tbody>
              <tr><td>浅野</td><td><span class="skill-tag skill-tag--call">あり</span></td><td><span class="skill-tag skill-tag--price">あり</span></td><td>—</td></tr>
              <tr><td>高野</td><td><span class="skill-tag skill-tag--call">あり</span></td><td>—</td><td>—</td></tr>
              <tr><td>谷野</td><td>—</td><td><span class="skill-tag skill-tag--price">あり</span></td><td>—</td></tr>
              <tr><td>木下</td><td><span class="skill-tag skill-tag--call">あり</span></td><td>—</td><td>—</td></tr>
              <tr><td>川上</td><td>—</td><td><span class="skill-tag skill-tag--price">あり</span></td><td>—</td></tr>
              <tr><td>牛之浜</td><td>—</td><td><span class="skill-tag skill-tag--price">あり</span></td><td>—</td></tr>
              <tr><td>濱田</td><td><span class="skill-tag skill-tag--call">あり</span></td><td><span class="skill-tag skill-tag--price">あり</span></td><td>—</td></tr>
              <tr><td>西</td><td><span class="skill-tag skill-tag--call">あり</span></td><td>—</td><td>—</td></tr>
              <tr><td>大隈</td><td>—</td><td><span class="skill-tag skill-tag--price">あり</span></td><td>—</td></tr>
              <tr><td>松尾</td><td><span class="skill-tag skill-tag--call">あり</span></td><td>—</td><td>—</td></tr>
              <tr><td>平山</td><td>—</td><td><span class="skill-tag skill-tag--price">あり</span></td><td>—</td></tr>
              <tr><td>戸田</td><td><span class="skill-tag skill-tag--call">あり</span></td><td>—</td><td>—</td></tr>
              <tr><td>新垣</td><td><span class="skill-tag skill-tag--call">あり</span></td><td>—</td><td>—</td></tr>
              <tr><td>池園</td><td>—</td><td><span class="skill-tag skill-tag--price">あり</span></td><td>—</td></tr>
              <tr><td>浅田</td><td><span class="skill-tag skill-tag--call">あり</span></td><td><span class="skill-tag skill-tag--price">あり</span></td><td>—</td></tr>
              <tr><td>谷脇</td><td>—</td><td><span class="skill-tag skill-tag--price">あり</span></td><td>—</td></tr>
              <tr><td>中野</td><td><span class="skill-tag skill-tag--call">あり</span></td><td>—</td><td>—</td></tr>
              <tr><td>青木</td><td><span class="skill-tag skill-tag--call">あり</span></td><td>—</td><td>—</td></tr>
            </tbody>
          </table>
        </div>
      </section>

      <!-- 休業日 -->
      <section id="closed-days" class="screen">
        <div class="page-header">
          <h1>休業日</h1>
          <p>お店の休業日を設定する画面</p>
        </div>
        <div class="card">
          <p class="card-title">休業日カレンダー</p>
          <p style="margin:0 0 16px 0; color: var(--ink-muted); font-size: 0.9rem;">店舗ごとの休業日を登録。シフト生成時に自動で除外されます。</p>
          <p style="margin: 0 0 8px 0; font-weight: 600;">2026年2月</p>
          <div class="cal-month">
            <div class="cal-head">
              <span>日</span><span>月</span><span>火</span><span>水</span><span>木</span><span>金</span><span>土</span>
            </div>
            <div class="cal-body" id="closed-days-body">
              <div class="cal-day closed"><span class="date-num">1</span><span class="date-content">休業</span></div>
              <div class="cal-day"><span class="date-num">2</span></div>
              <div class="cal-day"><span class="date-num">3</span></div>
              <div class="cal-day"><span class="date-num">4</span></div>
              <div class="cal-day"><span class="date-num">5</span></div>
              <div class="cal-day"><span class="date-num">6</span></div>
              <div class="cal-day"><span class="date-num">7</span></div>
              <div class="cal-day closed"><span class="date-num">8</span><span class="date-content">休業</span></div>
              <div class="cal-day"><span class="date-num">9</span></div>
              <div class="cal-day"><span class="date-num">10</span></div>
              <div class="cal-day"><span class="date-num">11</span></div>
              <div class="cal-day"><span class="date-num">12</span></div>
              <div class="cal-day"><span class="date-num">13</span></div>
              <div class="cal-day"><span class="date-num">14</span></div>
              <div class="cal-day closed"><span class="date-num">15</span><span class="date-content">休業</span></div>
              <div class="cal-day"><span class="date-num">16</span></div>
              <div class="cal-day"><span class="date-num">17</span></div>
              <div class="cal-day"><span class="date-num">18</span></div>
              <div class="cal-day"><span class="date-num">19</span></div>
              <div class="cal-day"><span class="date-num">20</span></div>
              <div class="cal-day"><span class="date-num">21</span></div>
              <div class="cal-day closed"><span class="date-num">22</span><span class="date-content">休業</span></div>
              <div class="cal-day closed"><span class="date-num">23</span><span class="date-content">休業</span></div>
              <div class="cal-day"><span class="date-num">24</span></div>
              <div class="cal-day"><span class="date-num">25</span></div>
              <div class="cal-day"><span class="date-num">26</span></div>
              <div class="cal-day"><span class="date-num">27</span></div>
              <div class="cal-day"><span class="date-num">28</span></div>
            </div>
          </div>
          <p style="margin: 12px 0 0; font-size: 0.8rem; color: var(--ink-muted);">※ 色付きは休業日（毎週火曜など）。プロトタイプのためサンプル表示。</p>
        </div>
      </section>

      <!-- イベントカレンダー -->
      <section id="event-calendar" class="screen">
        <div class="page-header">
          <h1>イベントカレンダー</h1>
          <p>お店のイベントを設定する画面</p>
        </div>
        <div class="card">
          <p class="card-title">イベントカレンダー</p>
          <p style="margin:0 0 16px 0; color: var(--ink-muted); font-size: 0.9rem;">ライブ・イベント日を登録。必要人員や必要スキルの目安設定に利用できます。</p>
          <p style="margin: 0 0 8px 0; font-weight: 600;">2026年2月</p>
          <div class="cal-month">
            <div class="cal-head">
              <span>日</span><span>月</span><span>火</span><span>水</span><span>木</span><span>金</span><span>土</span>
            </div>
            <div class="cal-body">
              <div class="cal-day"><span class="date-num">1</span></div>
              <div class="cal-day"><span class="date-num">2</span></div>
              <div class="cal-day"><span class="date-num">3</span></div>
              <div class="cal-day"><span class="date-num">4</span></div>
              <div class="cal-day"><span class="date-num">5</span></div>
              <div class="cal-day"><span class="date-num">6</span></div>
              <div class="cal-day"><span class="date-num">7</span></div>
              <div class="cal-day"><span class="date-num">8</span></div>
              <div class="cal-day"><span class="date-num">9</span></div>
              <div class="cal-day"><span class="date-num">10</span></div>
              <div class="cal-day"><span class="date-num">11</span></div>
              <div class="cal-day"><span class="date-num">12</span></div>
              <div class="cal-day"><span class="date-num">13</span></div>
              <div class="cal-day has-event"><span class="date-num">14</span><span class="date-content">バレンタイン</span></div>
              <div class="cal-day"><span class="date-num">15</span></div>
              <div class="cal-day"><span class="date-num">16</span></div>
              <div class="cal-day"><span class="date-num">17</span></div>
              <div class="cal-day"><span class="date-num">18</span></div>
              <div class="cal-day"><span class="date-num">19</span></div>
              <div class="cal-day has-event"><span class="date-num">20</span><span class="date-content">ライブ</span></div>
              <div class="cal-day"><span class="date-num">21</span></div>
              <div class="cal-day"><span class="date-num">22</span></div>
              <div class="cal-day"><span class="date-num">23</span></div>
              <div class="cal-day"><span class="date-num">24</span></div>
              <div class="cal-day"><span class="date-num">25</span></div>
              <div class="cal-day"><span class="date-num">26</span></div>
              <div class="cal-day"><span class="date-num">27</span></div>
              <div class="cal-day"><span class="date-num">28</span></div>
            </div>
          </div>
          <p style="margin: 12px 0 0; font-size: 0.8rem; color: var(--ink-muted);">※ 色付きはイベント日。プロトタイプのためサンプル表示。</p>
        </div>
      </section>

      <!-- スキルカレンダー（Sprint 3の新機能） -->
      <section id="skill-calendar" class="screen">
        <div class="page-header">
          <h1>スキルカレンダー</h1>
          <p>日別に「この日はどのスキルが必要か」を設定する画面 <span style="display:inline-block; padding:2px 8px; border-radius:12px; font-size:0.7rem; font-weight:600; background:var(--primary-soft); color:var(--primary);">R&D立証済</span></p>
        </div>
        <div class="card">
          <p class="card-title">2026年2月 — 日別スキル要求</p>
          <p style="margin:0 0 16px 0; color: var(--ink-muted); font-size: 0.9rem;">売上予測モデルの結果をもとに自動設定 + 店長が手動で上書き可能。<br>
          <span class="skill-tag skill-tag--call" style="margin-top:4px;">客呼び</span> = 来客数を増やしたい日　<span class="skill-tag skill-tag--price" style="margin-top:4px;">客単価UP</span> = 客単価を上げたい日</p>
          <p style="margin: 0 0 8px 0; font-weight: 600;">2026年2月</p>
          <div class="cal-month">
            <div class="cal-head">
              <span>日</span><span>月</span><span>火</span><span>水</span><span>木</span><span>金</span><span>土</span>
            </div>
            <div class="cal-body">
              <div class="cal-day closed"><span class="date-num">1</span><span class="date-content">休業</span></div>
              <div class="cal-day"><span class="date-num">2</span><span class="date-content"><span class="skill-tag skill-tag--price" style="font-size:0.65rem;">客単価UP</span></span></div>
              <div class="cal-day"><span class="date-num">3</span><span class="date-content"><span class="skill-tag skill-tag--price" style="font-size:0.65rem;">客単価UP</span></span></div>
              <div class="cal-day"><span class="date-num">4</span><span class="date-content" style="font-size:0.7rem; color:var(--ink-muted);">教育日</span></div>
              <div class="cal-day"><span class="date-num">5</span><span class="date-content"><span class="skill-tag skill-tag--call" style="font-size:0.65rem;">客呼び</span></span></div>
              <div class="cal-day"><span class="date-num">6</span><span class="date-content"><span class="skill-tag skill-tag--call" style="font-size:0.65rem;">客呼び</span><span class="skill-tag skill-tag--price" style="font-size:0.65rem;">客単価UP</span></span></div>
              <div class="cal-day"><span class="date-num">7</span><span class="date-content"><span class="skill-tag skill-tag--call" style="font-size:0.65rem;">客呼び</span><span class="skill-tag skill-tag--price" style="font-size:0.65rem;">客単価UP</span></span></div>
              <div class="cal-day closed"><span class="date-num">8</span><span class="date-content">休業</span></div>
              <div class="cal-day"><span class="date-num">9</span><span class="date-content"><span class="skill-tag skill-tag--price" style="font-size:0.65rem;">客単価UP</span></span></div>
              <div class="cal-day"><span class="date-num">10</span><span class="date-content"><span class="skill-tag skill-tag--price" style="font-size:0.65rem;">客単価UP</span></span></div>
              <div class="cal-day"><span class="date-num">11</span><span class="date-content" style="font-size:0.7rem; color:var(--ink-muted);">教育日</span></div>
              <div class="cal-day"><span class="date-num">12</span><span class="date-content"><span class="skill-tag skill-tag--call" style="font-size:0.65rem;">客呼び</span></span></div>
              <div class="cal-day"><span class="date-num">13</span><span class="date-content"><span class="skill-tag skill-tag--call" style="font-size:0.65rem;">客呼び</span><span class="skill-tag skill-tag--price" style="font-size:0.65rem;">客単価UP</span></span></div>
              <div class="cal-day has-event"><span class="date-num">14</span><span class="date-content"><span class="skill-tag skill-tag--call" style="font-size:0.65rem;">客呼び</span><span class="skill-tag skill-tag--price" style="font-size:0.65rem;">客単価UP</span></span></div>
              <div class="cal-day closed"><span class="date-num">15</span><span class="date-content">休業</span></div>
              <div class="cal-day"><span class="date-num">16</span><span class="date-content"><span class="skill-tag skill-tag--price" style="font-size:0.65rem;">客単価UP</span></span></div>
              <div class="cal-day"><span class="date-num">17</span><span class="date-content" style="font-size:0.7rem; color:var(--ink-muted);">教育日</span></div>
              <div class="cal-day"><span class="date-num">18</span><span class="date-content"><span class="skill-tag skill-tag--price" style="font-size:0.65rem;">客単価UP</span></span></div>
              <div class="cal-day"><span class="date-num">19</span><span class="date-content"><span class="skill-tag skill-tag--call" style="font-size:0.65rem;">客呼び</span></span></div>
              <div class="cal-day has-event"><span class="date-num">20</span><span class="date-content"><span class="skill-tag skill-tag--call" style="font-size:0.65rem;">客呼び</span><span class="skill-tag skill-tag--price" style="font-size:0.65rem;">客単価UP</span></span></div>
              <div class="cal-day"><span class="date-num">21</span><span class="date-content"><span class="skill-tag skill-tag--call" style="font-size:0.65rem;">客呼び</span><span class="skill-tag skill-tag--price" style="font-size:0.65rem;">客単価UP</span></span></div>
              <div class="cal-day closed"><span class="date-num">22</span><span class="date-content">休業</span></div>
              <div class="cal-day closed"><span class="date-num">23</span><span class="date-content">休業</span></div>
              <div class="cal-day"><span class="date-num">24</span><span class="date-content" style="font-size:0.7rem; color:var(--ink-muted);">教育日</span></div>
              <div class="cal-day"><span class="date-num">25</span><span class="date-content"><span class="skill-tag skill-tag--price" style="font-size:0.65rem;">客単価UP</span></span></div>
              <div class="cal-day"><span class="date-num">26</span><span class="date-content"><span class="skill-tag skill-tag--call" style="font-size:0.65rem;">客呼び</span></span></div>
              <div class="cal-day"><span class="date-num">27</span><span class="date-content"><span class="skill-tag skill-tag--call" style="font-size:0.65rem;">客呼び</span><span class="skill-tag skill-tag--price" style="font-size:0.65rem;">客単価UP</span></span></div>
              <div class="cal-day"><span class="date-num">28</span><span class="date-content"><span class="skill-tag skill-tag--call" style="font-size:0.65rem;">客呼び</span><span class="skill-tag skill-tag--price" style="font-size:0.65rem;">客単価UP</span></span></div>
            </div>
          </div>
          <p style="margin: 12px 0 0; font-size: 0.8rem; color: var(--ink-muted);">※ 金・土曜日は売上予測が高く「客呼び+客単価UP」が自動設定。水曜は中程度のため「教育日」として手動設定。<br>売上予測モデル（LightGBM）の出力に基づき、日別に必要スキルを自動算出します。</p>
        </div>
      </section>

      <!-- 仮シフト表 -->
      <section id="draft-shift" class="screen">
        <div class="page-header">
          <h1>仮シフト表 <span style="display:inline-block; padding:2px 8px; border-radius:12px; font-size:0.7rem; font-weight:600; background:var(--success-soft); color:var(--success);">稼働中</span></h1>
          <p>OR-Tools数理最適化で生成したスキル充足ベースのシフト案。スキルカレンダーの要求に基づき最適配置</p>
        </div>
        <div class="card">
          <p class="card-title">2026年2月 — 仮シフト</p>
          <p style="margin: 0 0 16px 0; font-size: 0.9rem; color: var(--ink-muted);">awb / acf の担当を苗字タグで表示。休業日は色付き。</p>
          <p style="margin: 0 0 8px 0; font-weight: 600;">2026年2月</p>
          <div class="cal-month">
            <div class="cal-head">
              <span>日</span><span>月</span><span>火</span><span>水</span><span>木</span><span>金</span><span>土</span>
            </div>
            <div class="cal-body">
              <div class="cal-day closed"><span class="date-num">1</span><span class="date-content">休業</span></div>
              <div class="cal-day"><span class="date-num">2</span><div class="staff-tags"><span class="cal-store">awb</span><span class="staff-tag awb">牛之浜</span><span class="cal-store">acf</span><span class="staff-tag acf">戸田</span></div></div>
              <div class="cal-day"><span class="date-num">3</span><div class="staff-tags"><span class="cal-store">awb</span><span class="staff-tag awb">濱田</span><span class="cal-store">acf</span><span class="staff-tag acf">池園</span></div></div>
              <div class="cal-day"><span class="date-num">4</span><div class="staff-tags"><span class="cal-store">awb</span><span class="staff-tag awb">高野</span><span class="cal-store">acf</span><span class="staff-tag acf">新垣</span></div></div>
              <div class="cal-day"><span class="date-num">5</span><div class="staff-tags"><span class="cal-store">awb</span><span class="staff-tag awb">浅野</span><span class="staff-tag awb">西</span><span class="cal-store">acf</span><span class="staff-tag acf">平山</span></div></div>
              <div class="cal-day"><span class="date-num">6</span><div class="staff-tags"><span class="cal-store">awb</span><span class="staff-tag awb">牛之浜</span><span class="cal-store">acf</span><span class="staff-tag acf">谷野</span></div></div>
              <div class="cal-day"><span class="date-num">7</span><div class="staff-tags"><span class="cal-store">awb</span><span class="staff-tag awb">戸田</span><span class="cal-store">acf</span><span class="staff-tag acf">木下</span></div></div>
              <div class="cal-day closed"><span class="date-num">8</span><span class="date-content">休業</span></div>
              <div class="cal-day"><span class="date-num">9</span><div class="staff-tags"><span class="cal-store">awb</span><span class="staff-tag awb">松尾</span><span class="cal-store">acf</span><span class="staff-tag acf">浅田</span></div></div>
              <div class="cal-day"><span class="date-num">10</span><div class="staff-tags"><span class="cal-store">awb</span><span class="staff-tag awb">浅野</span><span class="staff-tag awb">牛之浜</span><span class="cal-store">acf</span><span class="staff-tag acf">高野</span></div></div>
              <div class="cal-day"><span class="date-num">11</span><div class="staff-tags"><span class="cal-store">awb</span><span class="staff-tag awb">濱田</span><span class="cal-store">acf</span><span class="staff-tag acf">戸田</span><span class="staff-tag acf">池園</span></div></div>
              <div class="cal-day"><span class="date-num">12</span><div class="staff-tags"><span class="cal-store">awb</span><span class="staff-tag awb">松尾</span><span class="cal-store">acf</span><span class="staff-tag acf">浅田</span></div></div>
              <div class="cal-day"><span class="date-num">13</span><div class="staff-tags"><span class="cal-store">awb</span><span class="staff-tag awb">大隈</span><span class="cal-store">acf</span><span class="staff-tag acf">川上</span></div></div>
              <div class="cal-day has-event"><span class="date-num">14</span><div class="staff-tags"><span class="cal-store">awb</span><span class="staff-tag awb">浅野</span><span class="staff-tag awb">濱田</span><span class="cal-store">acf</span><span class="staff-tag acf">高野</span><span class="staff-tag acf">新垣</span></div></div>
              <div class="cal-day closed"><span class="date-num">15</span><span class="date-content">休業</span></div>
              <div class="cal-day"><span class="date-num">16</span><div class="staff-tags"><span class="cal-store">awb</span><span class="staff-tag awb">戸田</span><span class="cal-store">acf</span><span class="staff-tag acf">青木</span></div></div>
              <div class="cal-day"><span class="date-num">17</span><div class="staff-tags"><span class="cal-store">awb</span><span class="staff-tag awb">西</span><span class="cal-store">acf</span><span class="staff-tag acf">中野</span></div></div>
              <div class="cal-day"><span class="date-num">18</span><div class="staff-tags"><span class="cal-store">awb</span><span class="staff-tag awb">松尾</span><span class="cal-store">acf</span><span class="staff-tag acf">池園</span></div></div>
              <div class="cal-day"><span class="date-num">19</span><div class="staff-tags"><span class="cal-store">awb</span><span class="staff-tag awb">浅野</span><span class="staff-tag awb">牛之浜</span><span class="cal-store">acf</span><span class="staff-tag acf">高野</span><span class="staff-tag acf">戸田</span></div></div>
              <div class="cal-day"><span class="date-num">20</span><div class="staff-tags"><span class="cal-store">awb</span><span class="staff-tag awb">濱田</span><span class="cal-store">acf</span><span class="staff-tag acf">新垣</span></div></div>
              <div class="cal-day"><span class="date-num">21</span><div class="staff-tags"><span class="cal-store">awb</span><span class="staff-tag awb">平山</span><span class="cal-store">acf</span><span class="staff-tag acf">木下</span></div></div>
              <div class="cal-day closed"><span class="date-num">22</span><span class="date-content">休業</span></div>
              <div class="cal-day closed"><span class="date-num">23</span><span class="date-content">休業</span></div>
              <div class="cal-day"><span class="date-num">24</span><div class="staff-tags"><span class="cal-store">awb</span><span class="staff-tag awb">浅田</span><span class="cal-store">acf</span><span class="staff-tag acf">谷野</span></div></div>
              <div class="cal-day"><span class="date-num">25</span><div class="staff-tags"><span class="cal-store">awb</span><span class="staff-tag awb">川上</span><span class="cal-store">acf</span><span class="staff-tag acf">大隈</span></div></div>
              <div class="cal-day"><span class="date-num">26</span><div class="staff-tags"><span class="cal-store">awb</span><span class="staff-tag awb">戸田</span><span class="cal-store">acf</span><span class="staff-tag acf">松尾</span></div></div>
              <div class="cal-day"><span class="date-num">27</span><div class="staff-tags"><span class="cal-store">awb</span><span class="staff-tag awb">牛之浜</span><span class="cal-store">acf</span><span class="staff-tag acf">池園</span></div></div>
              <div class="cal-day"><span class="date-num">28</span><div class="staff-tags"><span class="cal-store">awb</span><span class="staff-tag awb">浅野</span><span class="staff-tag awb">西</span><span class="cal-store">acf</span><span class="staff-tag acf">高野</span></div></div>
            </div>
          </div>
          <p style="margin: 12px 0 0; font-size: 0.8rem; color: var(--ink-muted);">awb＝泡バー / acf＝アーティストカフェ。調整・確定画面で詳細を確認・編集できます。</p>
        </div>
      </section>

      <!-- 調整・確定 -->
      <section id="adjust" class="screen">
        <div class="page-header">
          <h1>調整・確定 <span style="display:inline-block; padding:2px 8px; border-radius:12px; font-size:0.7rem; font-weight:600; background:var(--primary-soft); color:var(--primary);">R&D立証済</span></h1>
          <p>売上予測・来客数予測 + LLMアドバイスを見ながらシフトを調整。3ベクトル（売上・教育・従業員満足）の観点で判断</p>
        </div>
        <div class="card">
          <h2 class="card-title">予測モデルの結果（参考）</h2>
          <p style="margin: 0 0 12px 0; font-size: 0.9rem; color: var(--ink-muted);">日別の売上・来客数予測。グリッドは日ごと。予測のため点線で表示しています。</p>
          <div class="month-nav">
            <button type="button" id="pred-prev-month">‹ 前月</button>
            <span id="pred-month-label">2026年2月</span>
            <button type="button" id="pred-next-month">次月 ›</button>
          </div>
          <div class="chart-row">
            <div class="chart-box">
              <h3>売上予測（万円）</h3>
              <p class="chart-sub">予測（点線）・日別</p>
              <svg id="chart-sales" viewBox="0 0 400 200" preserveAspectRatio="xMidYMid meet">
                <defs>
                  <linearGradient id="gradSales" x1="0" y1="1" x2="0" y2="0">
                    <stop offset="0%" stop-color="#c45c26" stop-opacity="0.22"/>
                    <stop offset="100%" stop-color="#c45c26" stop-opacity="0"/>
                  </linearGradient>
                </defs>
                <!-- グリッド（横・縦） -->
                <g fill="none" stroke="rgba(26,26,36,0.1)" stroke-width="0.8">
                  <line x1="24" y1="24" x2="24" y2="156"/><line x1="24" y1="156" x2="376" y2="156"/>
                  <line x1="124" y1="24" x2="124" y2="156"/><line x1="224" y1="24" x2="224" y2="156"/><line x1="324" y1="24" x2="324" y2="156"/>
                  <line x1="24" y1="52" x2="376" y2="52"/><line x1="24" y1="80" x2="376" y2="80"/><line x1="24" y1="108" x2="376" y2="108"/><line x1="24" y1="132" x2="376" y2="132"/>
                </g>
                <!-- 下面グラデーション -->
                <path fill="url(#gradSales)" d="M24,156 L24,100 L37,93 L51,107 L64,86 L77,72 L91,51 L104,58 L117,100 L131,93 L144,79 L157,86 L171,65 L184,30 L197,16 L211,93 L224,86 L237,100 L251,65 L264,58 L277,30 L291,37 L304,100 L317,93 L331,72 L344,79 L357,58 L371,30 L376,30 L376,156 Z"/>
                <!-- 折れ線（予測・点線） -->
                <polyline fill="none" stroke="#b84a1e" stroke-width="2.5" stroke-dasharray="8 5" stroke-linecap="round" stroke-linejoin="round" points="24,100 37,93 51,107 64,86 77,72 91,51 104,58 117,100 131,93 144,79 157,86 171,65 184,30 197,16 211,93 224,86 237,100 251,65 264,58 277,30 291,37 304,100 317,93 331,72 344,79 357,58 371,30 376,30"/>
                <!-- データポイント -->
                <g fill="#fff" stroke="#b84a1e" stroke-width="2">
                  <circle cx="24" cy="100" r="3.5"/><circle cx="37" cy="93" r="3.5"/><circle cx="51" cy="107" r="3.5"/><circle cx="64" cy="86" r="3.5"/><circle cx="77" cy="72" r="3.5"/><circle cx="91" cy="51" r="3.5"/><circle cx="104" cy="58" r="3.5"/><circle cx="117" cy="100" r="3.5"/><circle cx="131" cy="93" r="3.5"/><circle cx="144" cy="79" r="3.5"/><circle cx="157" cy="86" r="3.5"/><circle cx="171" cy="65" r="3.5"/><circle cx="184" cy="30" r="3.5"/><circle cx="197" cy="16" r="3.5"/><circle cx="211" cy="93" r="3.5"/><circle cx="224" cy="86" r="3.5"/><circle cx="237" cy="100" r="3.5"/><circle cx="251" cy="65" r="3.5"/><circle cx="264" cy="58" r="3.5"/><circle cx="277" cy="30" r="3.5"/><circle cx="291" cy="37" r="3.5"/><circle cx="304" cy="100" r="3.5"/><circle cx="317" cy="93" r="3.5"/><circle cx="331" cy="72" r="3.5"/><circle cx="344" cy="79" r="3.5"/><circle cx="357" cy="58" r="3.5"/><circle cx="371" cy="30" r="3.5"/><circle cx="376" cy="30" r="3.5"/>
                </g>
                <!-- Y軸ラベル -->
                <text x="18" y="160" font-size="11" fill="#5c5c6e" text-anchor="end">0</text>
                <text x="18" y="92" font-size="11" fill="#5c5c6e" text-anchor="end">10</text>
                <text x="18" y="24" font-size="11" fill="#5c5c6e" text-anchor="end">20</text>
                <!-- X軸ラベル -->
                <text x="24" y="178" font-size="11" fill="#5c5c6e">1日</text>
                <text x="124" y="178" font-size="11" fill="#5c5c6e" text-anchor="middle">7日</text>
                <text x="224" y="178" font-size="11" fill="#5c5c6e" text-anchor="middle">14日</text>
                <text x="324" y="178" font-size="11" fill="#5c5c6e" text-anchor="middle">21日</text>
                <text x="376" y="178" font-size="11" fill="#5c5c6e" text-anchor="start">28日</text>
              </svg>
            </div>
            <div class="chart-box">
              <h3>来客数予測（人）</h3>
              <p class="chart-sub">予測（点線）・日別</p>
              <svg id="chart-visitors" viewBox="0 0 400 200" preserveAspectRatio="xMidYMid meet">
                <defs>
                  <linearGradient id="gradVisitors" x1="0" y1="1" x2="0" y2="0">
                    <stop offset="0%" stop-color="#2d4a6e" stop-opacity="0.24"/>
                    <stop offset="100%" stop-color="#2d4a6e" stop-opacity="0"/>
                  </linearGradient>
                </defs>
                <!-- グリッド -->
                <g fill="none" stroke="rgba(26,26,36,0.1)" stroke-width="0.8">
                  <line x1="24" y1="24" x2="24" y2="156"/><line x1="24" y1="156" x2="376" y2="156"/>
                  <line x1="124" y1="24" x2="124" y2="156"/><line x1="224" y1="24" x2="224" y2="156"/><line x1="324" y1="24" x2="324" y2="156"/>
                  <line x1="24" y1="52" x2="376" y2="52"/><line x1="24" y1="80" x2="376" y2="80"/><line x1="24" y1="108" x2="376" y2="108"/><line x1="24" y1="132" x2="376" y2="132"/>
                </g>
                <!-- 下面グラデーション -->
                <path fill="url(#gradVisitors)" d="M24,156 L24,114 L37,104 L51,124 L64,91 L77,74 L91,54 L104,64 L117,114 L131,104 L144,84 L157,94 L171,64 L184,34 L197,24 L211,104 L224,94 L237,114 L251,64 L264,54 L277,34 L291,44 L304,114 L317,104 L331,74 L344,84 L357,54 L371,34 L376,31 L376,156 Z"/>
                <!-- 折れ線（予測・点線） -->
                <polyline fill="none" stroke="#2d4a6e" stroke-width="2.5" stroke-dasharray="8 5" stroke-linecap="round" stroke-linejoin="round" points="24,114 37,104 51,124 64,91 77,74 91,54 104,64 117,114 131,104 144,84 157,94 171,64 184,34 197,24 211,104 224,94 237,114 251,64 264,54 277,34 291,44 304,114 317,104 331,74 344,84 357,54 371,34 376,31"/>
                <!-- データポイント -->
                <g fill="#fff" stroke="#2d4a6e" stroke-width="2">
                  <circle cx="24" cy="114" r="3.5"/><circle cx="37" cy="104" r="3.5"/><circle cx="51" cy="124" r="3.5"/><circle cx="64" cy="91" r="3.5"/><circle cx="77" cy="74" r="3.5"/><circle cx="91" cy="54" r="3.5"/><circle cx="104" cy="64" r="3.5"/><circle cx="117" cy="114" r="3.5"/><circle cx="131" cy="104" r="3.5"/><circle cx="144" cy="84" r="3.5"/><circle cx="157" cy="94" r="3.5"/><circle cx="171" cy="64" r="3.5"/><circle cx="184" cy="34" r="3.5"/><circle cx="197" cy="24" r="3.5"/><circle cx="211" cy="104" r="3.5"/><circle cx="224" cy="94" r="3.5"/><circle cx="237" cy="114" r="3.5"/><circle cx="251" cy="64" r="3.5"/><circle cx="264" cy="54" r="3.5"/><circle cx="277" cy="34" r="3.5"/><circle cx="291" cy="44" r="3.5"/><circle cx="304" cy="114" r="3.5"/><circle cx="317" cy="104" r="3.5"/><circle cx="331" cy="74" r="3.5"/><circle cx="344" cy="84" r="3.5"/><circle cx="357" cy="54" r="3.5"/><circle cx="371" cy="34" r="3.5"/><circle cx="376" cy="31" r="3.5"/>
                </g>
                <!-- Y軸ラベル（0〜60人） -->
                <text x="18" y="160" font-size="11" fill="#5c5c6e" text-anchor="end">0</text>
                <text x="18" y="132" font-size="11" fill="#5c5c6e" text-anchor="end">15</text>
                <text x="18" y="104" font-size="11" fill="#5c5c6e" text-anchor="end">30</text>
                <text x="18" y="76" font-size="11" fill="#5c5c6e" text-anchor="end">45</text>
                <text x="18" y="24" font-size="11" fill="#5c5c6e" text-anchor="end">60</text>
                <!-- X軸ラベル -->
                <text x="24" y="178" font-size="11" fill="#5c5c6e">1日</text>
                <text x="124" y="178" font-size="11" fill="#5c5c6e" text-anchor="middle">7日</text>
                <text x="224" y="178" font-size="11" fill="#5c5c6e" text-anchor="middle">14日</text>
                <text x="324" y="178" font-size="11" fill="#5c5c6e" text-anchor="middle">21日</text>
                <text x="376" y="178" font-size="11" fill="#5c5c6e" text-anchor="start">28日</text>
              </svg>
            </div>
          </div>
        </div>
        <p style="margin: 0 0 12px 0; font-size: 0.9rem; color: var(--ink-muted);">予測とLLMアドバイスを見ながら、右の仮カレンダーを確認・調整し、問題なければ確定してください。</p>
        <div class="adjust-row">
          <div class="card">
            <h2 class="card-title">LLMアドバイス（チャットで相談）</h2>
            <p style="margin: 0 0 12px 0; font-size: 0.9rem; color: var(--ink-muted);">シフトに関する質問や変更要望を入力すると、制約を守った調整案を提案します。</p>
            <div class="chat-panel">
              <div class="chat-messages">
                <div class="chat-msg bot">
                  仮シフトを確認しました。<strong>【教育の観点】</strong> 2/4は「教育日」設定ですが、客呼びスキルを持つ高野さんが入っています。スキル未保有の新垣さんも同じ日なので、OJTの好機です。意図通りですか？
                  <div class="time">10:02</div>
                </div>
                <div class="chat-msg user">
                  いいね。あと2/14はバレンタインだから売上重視で組みたい
                  <div class="time">10:04</div>
                </div>
                <div class="chat-msg bot">
                  2/14はイベント日 × スキルカレンダーで「客呼び＋客単価UP」が設定済みです。現在の配置は浅野さん・濱田さん（awb）で、両方とも客呼び＋客単価UP持ちなので<strong>【売上の観点】</strong>最適です。<br><br><strong>【従業員満足の観点】</strong> ただし浅野さんは今月すでに金土を3回担当しており、翌週もあります。負荷が偏っていますが問題ないですか？
                  <div class="time">10:05</div>
                </div>
                <div class="chat-msg user">
                  2/21に浅野さんを外して、代わりに木下さん入れてバランス取って
                  <div class="time">10:07</div>
                </div>
                <div class="chat-msg bot">
                  了解です。2/21（土）のawbを浅野さん→木下さんに変更します。木下さんは客呼びスキルを持っているので、売上への影響は小さいです。浅野さんの月間出勤日数が6→5日になり、バランスが改善されます。反映しますか？
                  <div class="time">10:08</div>
                </div>
              </div>
              <div class="chat-form">
                <input type="text" placeholder="例：来週の水曜は教育に使いたい" />
                <button type="button">送信</button>
              </div>
            </div>
          </div>
          <div class="card">
            <h2 class="card-title">仮カレンダー（調整用）</h2>
            <p style="margin: 0 0 8px 0; font-size: 0.85rem; color: var(--ink-muted);">2026年2月 — 右で予測・チャットを見ながら編集できます</p>
            <div class="cal-month">
              <div class="cal-head">
                <span>日</span><span>月</span><span>火</span><span>水</span><span>木</span><span>金</span><span>土</span>
              </div>
              <div class="cal-body">
                <div class="cal-day closed"><span class="date-num">1</span><span class="date-content">休業</span></div>
                <div class="cal-day"><span class="date-num">2</span><div class="staff-tags"><span class="cal-store">awb</span><span class="staff-tag awb">牛之浜</span><span class="cal-store">acf</span><span class="staff-tag acf">戸田</span></div></div>
                <div class="cal-day"><span class="date-num">3</span><div class="staff-tags"><span class="cal-store">awb</span><span class="staff-tag awb">濱田</span><span class="cal-store">acf</span><span class="staff-tag acf">池園</span></div></div>
                <div class="cal-day"><span class="date-num">4</span><div class="staff-tags"><span class="cal-store">awb</span><span class="staff-tag awb">高野</span><span class="cal-store">acf</span><span class="staff-tag acf">新垣</span></div></div>
                <div class="cal-day"><span class="date-num">5</span><div class="staff-tags"><span class="cal-store">awb</span><span class="staff-tag awb">浅野</span><span class="staff-tag awb">西</span><span class="cal-store">acf</span><span class="staff-tag acf">平山</span></div></div>
                <div class="cal-day"><span class="date-num">6</span><div class="staff-tags"><span class="cal-store">awb</span><span class="staff-tag awb">牛之浜</span><span class="cal-store">acf</span><span class="staff-tag acf">谷野</span></div></div>
                <div class="cal-day"><span class="date-num">7</span><div class="staff-tags"><span class="cal-store">awb</span><span class="staff-tag awb">戸田</span><span class="cal-store">acf</span><span class="staff-tag acf">木下</span></div></div>
                <div class="cal-day closed"><span class="date-num">8</span><span class="date-content">休業</span></div>
                <div class="cal-day"><span class="date-num">9</span><div class="staff-tags"><span class="cal-store">awb</span><span class="staff-tag awb">松尾</span><span class="cal-store">acf</span><span class="staff-tag acf">浅田</span></div></div>
                <div class="cal-day"><span class="date-num">10</span><div class="staff-tags"><span class="cal-store">awb</span><span class="staff-tag awb">浅野</span><span class="staff-tag awb">牛之浜</span><span class="cal-store">acf</span><span class="staff-tag acf">高野</span></div></div>
                <div class="cal-day"><span class="date-num">11</span><div class="staff-tags"><span class="cal-store">awb</span><span class="staff-tag awb">濱田</span><span class="cal-store">acf</span><span class="staff-tag acf">戸田</span><span class="staff-tag acf">池園</span></div></div>
                <div class="cal-day"><span class="date-num">12</span><div class="staff-tags"><span class="cal-store">awb</span><span class="staff-tag awb">松尾</span><span class="cal-store">acf</span><span class="staff-tag acf">浅田</span></div></div>
                <div class="cal-day"><span class="date-num">13</span><div class="staff-tags"><span class="cal-store">awb</span><span class="staff-tag awb">大隈</span><span class="cal-store">acf</span><span class="staff-tag acf">川上</span></div></div>
                <div class="cal-day has-event"><span class="date-num">14</span><div class="staff-tags"><span class="cal-store">awb</span><span class="staff-tag awb">浅野</span><span class="staff-tag awb">濱田</span><span class="cal-store">acf</span><span class="staff-tag acf">高野</span><span class="staff-tag acf">新垣</span></div></div>
                <div class="cal-day closed"><span class="date-num">15</span><span class="date-content">休業</span></div>
                <div class="cal-day"><span class="date-num">16</span><div class="staff-tags"><span class="cal-store">awb</span><span class="staff-tag awb">戸田</span><span class="cal-store">acf</span><span class="staff-tag acf">青木</span></div></div>
                <div class="cal-day"><span class="date-num">17</span><div class="staff-tags"><span class="cal-store">awb</span><span class="staff-tag awb">西</span><span class="cal-store">acf</span><span class="staff-tag acf">中野</span></div></div>
                <div class="cal-day"><span class="date-num">18</span><div class="staff-tags"><span class="cal-store">awb</span><span class="staff-tag awb">松尾</span><span class="cal-store">acf</span><span class="staff-tag acf">池園</span></div></div>
                <div class="cal-day"><span class="date-num">19</span><div class="staff-tags"><span class="cal-store">awb</span><span class="staff-tag awb">浅野</span><span class="staff-tag awb">牛之浜</span><span class="cal-store">acf</span><span class="staff-tag acf">高野</span><span class="staff-tag acf">戸田</span></div></div>
                <div class="cal-day"><span class="date-num">20</span><div class="staff-tags"><span class="cal-store">awb</span><span class="staff-tag awb">濱田</span><span class="cal-store">acf</span><span class="staff-tag acf">新垣</span></div></div>
                <div class="cal-day"><span class="date-num">21</span><div class="staff-tags"><span class="cal-store">awb</span><span class="staff-tag awb">平山</span><span class="cal-store">acf</span><span class="staff-tag acf">木下</span></div></div>
                <div class="cal-day closed"><span class="date-num">22</span><span class="date-content">休業</span></div>
                <div class="cal-day closed"><span class="date-num">23</span><span class="date-content">休業</span></div>
                <div class="cal-day"><span class="date-num">24</span><div class="staff-tags"><span class="cal-store">awb</span><span class="staff-tag awb">浅田</span><span class="cal-store">acf</span><span class="staff-tag acf">谷野</span></div></div>
                <div class="cal-day"><span class="date-num">25</span><div class="staff-tags"><span class="cal-store">awb</span><span class="staff-tag awb">川上</span><span class="cal-store">acf</span><span class="staff-tag acf">大隈</span></div></div>
                <div class="cal-day"><span class="date-num">26</span><div class="staff-tags"><span class="cal-store">awb</span><span class="staff-tag awb">戸田</span><span class="cal-store">acf</span><span class="staff-tag acf">松尾</span></div></div>
                <div class="cal-day"><span class="date-num">27</span><div class="staff-tags"><span class="cal-store">awb</span><span class="staff-tag awb">牛之浜</span><span class="cal-store">acf</span><span class="staff-tag acf">池園</span></div></div>
                <div class="cal-day"><span class="date-num">28</span><div class="staff-tags"><span class="cal-store">awb</span><span class="staff-tag awb">浅野</span><span class="staff-tag awb">西</span><span class="cal-store">acf</span><span class="staff-tag acf">高野</span></div></div>
              </div>
            </div>
          </div>
        </div>
        <div class="confirm-btn-wrap">
          <button type="button" class="confirm-btn" id="confirm-shift-btn">シフトを確定する</button>
        </div>
      </section>

      <!-- 最終カレンダー -->
      <section id="final-calendar" class="screen">
        <div class="page-header">
          <h1>最終カレンダー</h1>
          <p>確定したシフトをカレンダー形式で表示します</p>
        </div>
        <div class="card">
          <p class="card-title">2026年2月 — 確定シフト</p>
          <p style="margin: 0 0 16px 0; font-size: 0.9rem; color: var(--ink-muted);">確定ボタン押下後にここに最終シフトが表示されます。awb/acf で店舗、苗字をタグ表示。</p>
          <div class="cal-month">
            <div class="cal-head">
              <span>日</span><span>月</span><span>火</span><span>水</span><span>木</span><span>金</span><span>土</span>
            </div>
            <div class="cal-body">
              <div class="cal-day closed"><span class="date-num">1</span><span class="date-content">休業</span></div>
              <div class="cal-day"><span class="date-num">2</span><div class="staff-tags"><span class="cal-store">awb</span><span class="staff-tag awb">牛之浜</span><span class="cal-store">acf</span><span class="staff-tag acf">戸田</span></div></div>
              <div class="cal-day"><span class="date-num">3</span><div class="staff-tags"><span class="cal-store">awb</span><span class="staff-tag awb">濱田</span><span class="cal-store">acf</span><span class="staff-tag acf">池園</span></div></div>
              <div class="cal-day"><span class="date-num">4</span><div class="staff-tags"><span class="cal-store">awb</span><span class="staff-tag awb">高野</span><span class="cal-store">acf</span><span class="staff-tag acf">新垣</span></div></div>
              <div class="cal-day"><span class="date-num">5</span><div class="staff-tags"><span class="cal-store">awb</span><span class="staff-tag awb">浅野</span><span class="staff-tag awb">西</span><span class="cal-store">acf</span><span class="staff-tag acf">平山</span></div></div>
              <div class="cal-day"><span class="date-num">6</span><div class="staff-tags"><span class="cal-store">awb</span><span class="staff-tag awb">牛之浜</span><span class="cal-store">acf</span><span class="staff-tag acf">谷野</span></div></div>
              <div class="cal-day"><span class="date-num">7</span><div class="staff-tags"><span class="cal-store">awb</span><span class="staff-tag awb">戸田</span><span class="cal-store">acf</span><span class="staff-tag acf">木下</span></div></div>
              <div class="cal-day closed"><span class="date-num">8</span><span class="date-content">休業</span></div>
              <div class="cal-day"><span class="date-num">9</span><div class="staff-tags"><span class="cal-store">awb</span><span class="staff-tag awb">松尾</span><span class="cal-store">acf</span><span class="staff-tag acf">浅田</span></div></div>
              <div class="cal-day"><span class="date-num">10</span><div class="staff-tags"><span class="cal-store">awb</span><span class="staff-tag awb">浅野</span><span class="staff-tag awb">牛之浜</span><span class="cal-store">acf</span><span class="staff-tag acf">高野</span></div></div>
              <div class="cal-day"><span class="date-num">11</span><div class="staff-tags"><span class="cal-store">awb</span><span class="staff-tag awb">濱田</span><span class="cal-store">acf</span><span class="staff-tag acf">戸田</span><span class="staff-tag acf">池園</span></div></div>
              <div class="cal-day"><span class="date-num">12</span><div class="staff-tags"><span class="cal-store">awb</span><span class="staff-tag awb">松尾</span><span class="cal-store">acf</span><span class="staff-tag acf">浅田</span></div></div>
              <div class="cal-day"><span class="date-num">13</span><div class="staff-tags"><span class="cal-store">awb</span><span class="staff-tag awb">大隈</span><span class="cal-store">acf</span><span class="staff-tag acf">川上</span></div></div>
              <div class="cal-day has-event"><span class="date-num">14</span><div class="staff-tags"><span class="cal-store">awb</span><span class="staff-tag awb">浅野</span><span class="staff-tag awb">濱田</span><span class="cal-store">acf</span><span class="staff-tag acf">高野</span><span class="staff-tag acf">新垣</span></div></div>
              <div class="cal-day closed"><span class="date-num">15</span><span class="date-content">休業</span></div>
              <div class="cal-day"><span class="date-num">16</span><div class="staff-tags"><span class="cal-store">awb</span><span class="staff-tag awb">戸田</span><span class="cal-store">acf</span><span class="staff-tag acf">青木</span></div></div>
              <div class="cal-day"><span class="date-num">17</span><div class="staff-tags"><span class="cal-store">awb</span><span class="staff-tag awb">西</span><span class="cal-store">acf</span><span class="staff-tag acf">中野</span></div></div>
              <div class="cal-day"><span class="date-num">18</span><div class="staff-tags"><span class="cal-store">awb</span><span class="staff-tag awb">松尾</span><span class="cal-store">acf</span><span class="staff-tag acf">池園</span></div></div>
              <div class="cal-day"><span class="date-num">19</span><div class="staff-tags"><span class="cal-store">awb</span><span class="staff-tag awb">浅野</span><span class="staff-tag awb">牛之浜</span><span class="cal-store">acf</span><span class="staff-tag acf">高野</span><span class="staff-tag acf">戸田</span></div></div>
              <div class="cal-day"><span class="date-num">20</span><div class="staff-tags"><span class="cal-store">awb</span><span class="staff-tag awb">濱田</span><span class="cal-store">acf</span><span class="staff-tag acf">新垣</span></div></div>
              <div class="cal-day"><span class="date-num">21</span><div class="staff-tags"><span class="cal-store">awb</span><span class="staff-tag awb">平山</span><span class="cal-store">acf</span><span class="staff-tag acf">木下</span></div></div>
              <div class="cal-day closed"><span class="date-num">22</span><span class="date-content">休業</span></div>
              <div class="cal-day closed"><span class="date-num">23</span><span class="date-content">休業</span></div>
              <div class="cal-day"><span class="date-num">24</span><div class="staff-tags"><span class="cal-store">awb</span><span class="staff-tag awb">浅田</span><span class="cal-store">acf</span><span class="staff-tag acf">谷野</span></div></div>
              <div class="cal-day"><span class="date-num">25</span><div class="staff-tags"><span class="cal-store">awb</span><span class="staff-tag awb">川上</span><span class="cal-store">acf</span><span class="staff-tag acf">大隈</span></div></div>
              <div class="cal-day"><span class="date-num">26</span><div class="staff-tags"><span class="cal-store">awb</span><span class="staff-tag awb">戸田</span><span class="cal-store">acf</span><span class="staff-tag acf">松尾</span></div></div>
              <div class="cal-day"><span class="date-num">27</span><div class="staff-tags"><span class="cal-store">awb</span><span class="staff-tag awb">牛之浜</span><span class="cal-store">acf</span><span class="staff-tag acf">池園</span></div></div>
              <div class="cal-day"><span class="date-num">28</span><div class="staff-tags"><span class="cal-store">awb</span><span class="staff-tag awb">浅野</span><span class="staff-tag awb">西</span><span class="cal-store">acf</span><span class="staff-tag acf">高野</span></div></div>
            </div>
          </div>
          <p style="margin: 12px 0 0; font-size: 0.8rem; color: var(--ink-muted);">awb＝泡バー / acf＝アーティストカフェ。プロトタイプのためサンプル表示。</p>
        </div>
      </section>

      <footer style="margin-top: 48px; padding-top: 24px; border-top: 1px solid rgba(26,26,36,0.08); font-size: 0.8rem; color: var(--ink-muted);">
        副店長Buddy — シフト最適化プロダクトビジョン（UIプロトタイプ / 実際の運用はNotionベース）
      </footer>
    </main>
  </div>

  <script>
    (function() {
      var links = document.querySelectorAll('.nav-link');
      var screens = document.querySelectorAll('.screen');
      var navIds = ['#dashboard', '#draft-shift', '#adjust', '#final-calendar'];
      function show(id) {
        if (!id || !id.startsWith('#')) return;
        var target = document.querySelector(id);
        if (!target) return;
        screens.forEach(function(s) { s.classList.remove('active'); });
        links.forEach(function(a) { a.classList.remove('active'); });
        target.classList.add('active');
        if (navIds.indexOf(id) !== -1) {
          var link = document.querySelector('.nav-link[href="' + id + '"]');
          if (link) link.classList.add('active');
        } else {
          var dash = document.querySelector('.nav-link[href="#dashboard"]');
          if (dash) dash.classList.add('active');
        }
        try { history.replaceState(null, '', id); } catch (e) {}
      }
      links.forEach(function(a) {
        a.addEventListener('click', function(e) {
          e.preventDefault();
          show(a.getAttribute('href'));
        });
      });
      document.querySelectorAll('.nav-link-btn').forEach(function(btn) {
        btn.addEventListener('click', function(e) {
          var href = btn.getAttribute('href');
          if (href && href.startsWith('#')) { e.preventDefault(); show(href); }
        });
      });
      var confirmBtn = document.getElementById('confirm-shift-btn');
      if (confirmBtn) confirmBtn.addEventListener('click', function() { show('#final-calendar'); });
      if (location.hash) show(location.hash);
      else show('#dashboard');
      window.addEventListener('hashchange', function() { show(location.hash); });

      // 予測グラフの月切替（表示ラベルのみ。グラフは2月データのまま）
      (function() {
        var months = ['2026年1月', '2026年2月', '2026年3月'];
        var idx = 1;
        var label = document.getElementById('pred-month-label');
        var prevBtn = document.getElementById('pred-prev-month');
        var nextBtn = document.getElementById('pred-next-month');
        if (!label || !prevBtn || !nextBtn) return;
        function update() { label.textContent = months[idx]; }
        prevBtn.addEventListener('click', function() { idx = (idx - 1 + 3) % 3; update(); });
        nextBtn.addEventListener('click', function() { idx = (idx + 1) % 3; update(); });
      })();
    })();
  </script>
</body>
</html>
